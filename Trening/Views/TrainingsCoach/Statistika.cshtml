@model Trening.ViewModels.Filter6

@{
    ViewData["Title"] = "Statistika";
}

<br />
<h4 style="color:#ff5660; font-size:x-large">Training: @ViewData["Training"]</h4>
<br />
<br />
<style>
    td {
        width: 33%;
    }

    thead tr {
        color: #ff5660;
    }
</style>
<table class="table">
    <thead>
        <tr>
            <th>
                <h5>Gender</h5>
            </th>
            <th>
                <h5>Number_Users</h5>
            </th>
            <th>
                <h5>Percentage</h5>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{ int vk = 0;}
        @{ int m = 0;}@{ int f = 0;}@{ int undef = 0;}
        @foreach (var i in Model.Enrollments)
        {
            vk += 1;
            User user = Model.Users.Where(x => x.ID == i.UserID).FirstOrDefault();
            if (user.gender != null)
            {
                if (user.gender.ToUpper().Equals("F"))
                {
                    f += 1;
                }
                else if (user.gender.ToUpper().Equals("M"))
                {
                    m += 1;
                }
                else
                    undef += 1;
            }
            else
                undef += 1;

        }
        <tr>
            <td>
                <h6>M</h6>
            </td>
            <td>
                <h6>@m</h6>
            </td>
            <td>

                @{ if (m != 0)
                    {
                        decimal z = m;
                        z /= vk;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
        <tr>
            <td>
                <h6>F</h6>
            </td>
            <td>
                <h6>@f</h6>
            </td>
            <td>

                @{ if (f != 0)
                    {
                        decimal z = f;
                        z /= vk;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
        <tr>
            <td>
                <h6>Other</h6>
            </td>
            <td>
                <h6>@undef</h6>
            </td>
            <td>

                @{ if (undef != 0)
                    {
                        decimal z = undef;
                        z /= vk;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
    </tbody>
</table>

<br />
<br />
<table class="table">
    <thead>
        <tr>
            <th>
                <h5>City</h5>
            </th>
            <th>
                <h5>Number_Users</h5>
            </th>
            <th>
                <h5>Percentage</h5>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{ int vk1 = 0;}
        @{ int sk = 0;}@{ int other = 0;}@{ int nema = 0;}
        @foreach (var i in Model.Enrollments)
        {
            vk1 += 1;
            User user1 = Model.Users.Where(x => x.ID == i.UserID).FirstOrDefault();
            if (user1.City != null)
            {
                if (user1.City.ToUpper().Equals("SKOPJE"))
                {
                    sk += 1;
                }
                else
                    other += 1;
            }
            else
                nema += 1;
        }
        <tr>
            <td>
                <h6>Skopje</h6>
            </td>
            <td>
                <h6>@sk</h6>
            </td>
            <td>

                @{ if (sk != 0)
                    {
                        decimal z = sk;
                        z /= vk1;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
        <tr>
            <td>
                <h6>Other</h6>
            </td>
            <td>
                <h6>@other</h6>
            </td>
            <td>

                @{ if (other != 0)
                    {
                        decimal z = other;
                        z /= vk1;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
        <tr>
            <td>
                <h6>Null</h6>
            </td>
            <td>
                <h6>@nema</h6>
            </td>
            <td>

                @{ if (nema != 0)
                    {
                        decimal z = nema;
                        z /= vk1;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
    </tbody>
</table>



<br />
<br />
<table class="table">
    <thead>
        <tr>
            <th>
                <h5>Exercise Level</h5>
            </th>
            <th>
                <h5>Number_Users</h5>
            </th>
            <th>
                <h5>Percentage</h5>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{ int vk2 = 0;}
        @{ int adv = 0;}@{ int other1 = 0;}@{ int nema1 = 0;}
        @foreach (var i in Model.Enrollments)
        {
            vk2 += 1;
            User user2 = Model.Users.Where(x => x.ID == i.UserID).FirstOrDefault();
            if (user2.ExerciseLevel != null)
            {
                if (user2.ExerciseLevel.ToUpper().Equals("ADVANCED"))
                {
                    adv += 1;
                }
                else
                    other1 += 1;
            }
            else
                nema1 += 1;
        }
        <tr>
            <td>
                <h6>Advanced</h6>
            </td>
            <td>
                <h6>@adv</h6>
            </td>
            <td>

                @{ if (adv != 0)
                    {
                        decimal z = adv;
                        z /= vk2;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }

            </td>
        </tr>
        <tr>
            <td>
                <h6>Other</h6>
            </td>
            <td>
                <h6>@other1</h6>
            </td>
            <td>

                @{ if (other1 != 0)
                    {
                        decimal z = other1;
                        z /= vk2;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
        <tr>
            <td>
                <h6>Null</h6>
            </td>
            <td>
                <h6>@nema1</h6>
            </td>
            <td>

                @{ if (nema1 != 0)
                    {
                        decimal z = nema1;
                        z /= vk2;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
    </tbody>
</table>



<br />
<br />
<table class="table">
    <thead>
        <tr>
            <th>
                <h5>Phone Number</h5>
            </th>
            <th>
                <h5>Number_Users</h5>
            </th>
            <th>
                <h5>Percentage</h5>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @{ int vk3 = 0;}
        @{ int has = 0;}@{ int nema2 = 0;}
        @foreach (var i in Model.Enrollments)
        {
            vk3 += 1;
            User user3 = Model.Users.Where(x => x.ID == i.UserID).FirstOrDefault();
            if (user3.PhoneNumber != null)
            {
                    has += 1;
            }
            else
                nema2 += 1;
        }
        <tr>
            <td>
                <h6>Filled</h6>
            </td>
            <td>
                <h6>@has</h6>
            </td>
            <td>

                @{ if (has != 0)
                    {
                        decimal z = has;
                        z /= vk3;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }

            </td>
        </tr>
        <tr>
            <td>
                <h6>Null</h6>
            </td>
            <td>
                <h6>@nema2</h6>
            </td>
            <td>

                @{ if (nema2 != 0)
                    {
                        decimal z = nema2;
                        z /= vk3;
                        z *= 100;
                        <h6>@z %</h6>}
                    else
                    { <h6>0.00 %</h6>}
                }
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />